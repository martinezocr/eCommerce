<div class="spinner-container" *ngIf="working">
  <mat-spinner></mat-spinner>
</div>
<h2 mat-dialog-title>Usuario</h2>
<form [formGroup]="userForm">
  <mat-dialog-content class="mat-typography">
    <div fxLayout="row wrap" fxLayoutGap="1%">
      <mat-form-field fxFlex="73">
        <input matInput cdkFocusInitial placeholder="Email" maxlength="255" formControlName="username">
      </mat-form-field>
      <mat-slide-toggle fxFlex="20" fxFlexOffset="5%" fxFlexAlign="center" formControlName="isActive">Activo</mat-slide-toggle>
      <mat-form-field fxFlex="49">
        <input matInput placeholder="Nombre" maxlength="150" formControlName="firstName">
      </mat-form-field>
      <mat-form-field fxFlex="49">
        <input matInput placeholder="Apellido" maxlength="50" formControlName="lastName">
      </mat-form-field>
      <mat-form-field fxFlex="100">
        <mat-select placeholder="Puede gestionar" multiple formControlName="roles">
          <mat-option [value]="255">Administrador</mat-option>
          <mat-option [value]="1">Cliente</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex="49">
        <input type="password" maxlength="50" matInput placeholder="Contraseña" formControlName="password">
      </mat-form-field>
      <mat-form-field [class.mat-form-field-invalid]="userForm.hasError('notSame')" fxFlex="49">
        <input type="password" maxlength="50" matInput placeholder="Repetir contraseña" formControlName="confirmPassword">
      </mat-form-field>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <div>
      <button mat-button (click)="cancel()" type="button">Cancelar</button>
      <button mat-button (click)="save()" type="submit">Guardar</button>
    </div>
  </mat-dialog-actions>
</form>
